# ì• ì°©ìœ í˜• í…ŒìŠ¤íŠ¸ 15ë¬¸í•­ ë°ì´í„°
# Bartholomew & Horowitz(1991) ëª¨ë¸ ê¸°ë°˜
# ê° ì„ íƒì§€: (í…ìŠ¤íŠ¸, ë¶ˆì•ˆ ì ìˆ˜, íšŒí”¼ ì ìˆ˜)

QUESTIONS = [
    # â”€â”€ ì—°ë½/ì†Œí†µ (Q1~Q3) â”€â”€
    {
        "category": "ðŸ’¬ ì—°ë½/ì†Œí†µ",
        "question": "Q1. ì—°ì¸ì—ê²Œ ì¹´í†¡ì„ ë³´ëƒˆëŠ”ë° 3ì‹œê°„ì§¸ ì½ì”¹ì´ë‹¤.",
        "options": [
            ("ë°”ìœê°€ ë³´ë‹¤ í•˜ê³  ë‚´ í•  ì¼ í•¨", 1, 1),
            ("ì‹ ê²½ ì“°ì´ì§€ë§Œ ì°¸ê³  ê¸°ë‹¤ë¦¼", 2, 1),
            ("ë¶ˆì•ˆí•´ì„œ í•œ ë²ˆ ë” ì—°ë½í•¨", 4, 1),
            ("ì½ì”¹ì´ë©´ ë‚˜ë„ ì—°ë½ ì•ˆ í•¨", 2, 4),
        ],
    },
    {
        "category": "ðŸ’¬ ì—°ë½/ì†Œí†µ",
        "question": "Q2. ì—°ì¸ì´ \"ë‚˜ ì˜¤ëŠ˜ ì¢€ í˜¼ìž ìžˆê³  ì‹¶ì–´\"ë¼ê³  í•œë‹¤.",
        "options": [
            ("ì•Œê² ë‹¤ê³  í•˜ê³  ë‚´ì¼ ì—°ë½í•¨", 1, 1),
            ("ë‚˜ ë•Œë¬¸ì¸ê°€ ê³„ì† ìƒê°ë‚¨", 4, 1),
            ("ì˜¤ížˆë ¤ ë‚˜ë„ íŽ¸í•´ì„œ ì¢‹ìŒ", 1, 4),
            ("ì´í•´í•˜ë ¤ëŠ”ë° ë¶ˆì•ˆí•˜ê³  í™”ë„ ë‚¨", 4, 3),
        ],
    },
    {
        "category": "ðŸ’¬ ì—°ë½/ì†Œí†µ",
        "question": "Q3. ì—°ì¸ì´ ë‹µìž¥ì€ ëŠ¦ëŠ”ë° SNSì—ëŠ” í™œë™ ì¤‘ì´ë‹¤.",
        "options": [
            ("ë­ ê·¸ëŸ´ ìˆ˜ë„ ìžˆì§€", 1, 1),
            ("ìº¡ì³í•´ë‘ê³  ë‚˜ì¤‘ì— ë¬¼ì–´ë´„", 4, 1),
            ("ì‹ ê²½ ì“°ì´ì§€ë§Œ ë‚˜ë„ ì—°ë½ ì¤„ìž„", 2, 4),
            ("ê´œì°®ì€ ì²™í•˜ë‹¤ê°€ ë‚˜ì¤‘ì— í„°ì§", 4, 3),
        ],
    },
    # â”€â”€ ê°ˆë“± ìƒí™© (Q4~Q6) â”€â”€
    {
        "category": "âš¡ ê°ˆë“± ìƒí™©",
        "question": "Q4. ì—°ì¸ê³¼ ì‹¬í•˜ê²Œ ë‹¤í‰œë‹¤. ì„œë¡œ ê°ì •ì´ ê²©í•´ì§„ ìƒíƒœ.",
        "options": [
            ("ì¢€ ì‹ížˆê³  ì°¨ë¶„í•˜ê²Œ ë‹¤ì‹œ ì–˜ê¸°í•˜ìžê³  í•¨", 1, 1),
            ("ì´ëŒ€ë¡œ ëë‚˜ë©´ ì–´ì©Œì§€ ì‹¶ì–´ì„œ ë¨¼ì € ì—°ë½í•¨", 4, 1),
            ("ì¼ë‹¨ ê±°ë¦¬ë¥¼ ë‘ê³  ì—°ë½ì„ ì•ˆ í•¨", 1, 4),
            ("í™”í•´í•˜ê³  ì‹¶ì€ë° ì—°ë½í•˜ë©´ ë˜ ì‹¸ìš¸ ê²ƒ ê°™ì•„ì„œ ê°ˆíŒ¡ì§ˆíŒ¡", 3, 3),
        ],
    },
    {
        "category": "âš¡ ê°ˆë“± ìƒí™©",
        "question": "Q5. ì—°ì¸ì´ \"ë„ˆëŠ” ë§¨ë‚  ê·¸ëŸ¬ë”ë¼\"ë¼ê³  í–ˆë‹¤.",
        "options": [
            ("ì–´ë–¤ ë¶€ë¶„ì¸ì§€ ë¬¼ì–´ë³´ê³  ëŒ€í™”ë¡œ í’€ë ¤ í•¨", 1, 1),
            ("\"ë‚˜ ê·¸ë ‡ê²Œ ë³„ë¡œì•¼?\" ìƒì²˜ë°›ìŒ", 4, 1),
            ("\"ê·¸ëŸ¬ë©´ ì–´ì©Œë¼ê³ \" í•˜ê³  ëŒ€í™” ëŠìŒ", 1, 4),
            ("ì†ìœ¼ë¡œ ë¬´ë„ˆì§€ëŠ”ë° ê²‰ìœ¼ë¡œëŠ” í™”ëƒ„", 4, 3),
        ],
    },
    {
        "category": "âš¡ ê°ˆë“± ìƒí™©",
        "question": "Q6. ì—°ì¸ì´ ì„œìš´í•˜ë‹¤ê³  í–ˆëŠ”ë° ì´ìœ ê°€ ë‚©ë“ì´ ì•ˆ ëœë‹¤.",
        "options": [
            ("ë‚´ ìƒê°ì€ ë‹¤ë¥´ì§€ë§Œ ìƒëŒ€ ê°ì •ì€ ì¸ì •í•¨", 1, 1),
            ("ë‚´ê°€ ë­˜ ìž˜ëª»í•œ ê±°ì§€? ê³„ì† ë³µê¸°í•¨", 4, 1),
            ("ì¢€ ì˜ˆë¯¼í•œ ê±° ì•„ë‹Œê°€ ì‹¶ì–´ì„œ ë„˜ê¹€", 1, 4),
            ("ì´í•´í•˜ë ¤ëŠ”ë° ì•ˆ ë˜ê³  ê°ì •ì´ ì™”ë‹¤ ê°”ë‹¤ í•¨", 3, 3),
        ],
    },
    # â”€â”€ ì¹œë°€ê° (Q7~Q9) â”€â”€
    {
        "category": "ðŸ’— ì¹œë°€ê°",
        "question": "Q7. ì—°ì¸ì´ ê°‘ìžê¸° \"ë‚˜ ìš”ì¦˜ ë„ˆí•œí…Œ ì§„ì‹¬ì´ì•¼\"ë¼ê³  í•œë‹¤.",
        "options": [
            ("ê³ ë§™ê³  ë‚˜ë„ ê·¸ë ‡ë‹¤ê³  ìžì—°ìŠ¤ëŸ½ê²Œ ë§í•¨", 1, 1),
            ("ë„ˆë¬´ ì¢‹ì€ë° \"ì§„ì§œ?\" í™•ì¸ë°›ê³  ì‹¶ìŒ", 3, 1),
            ("ë¶€ë‹´ìŠ¤ëŸ½ê³  ë­ë¼ ë°˜ì‘í•´ì•¼ í• ì§€ ëª¨ë¥´ê² ìŒ", 1, 4),
            ("ì¢‹ì€ë° ì´ê²Œ ì˜¤ëž˜ê°ˆê¹Œ ë¶ˆì•ˆí•¨", 3, 3),
        ],
    },
    {
        "category": "ðŸ’— ì¹œë°€ê°",
        "question": "Q8. ì—°ì¸ì´ ë§¤ì¼ ì „í™”í•˜ìžê³  í•œë‹¤.",
        "options": [
            ("ì¢‹ë‹¤ê³  í•˜ë˜ ë°”ìœ ë‚ ì€ ì†”ì§ížˆ ë§í•¨", 1, 1),
            ("ì¢‹ì•„ì„œ ë°”ë¡œ OK, ì•ˆ ê±¸ë ¤ì˜¤ëŠ” ë‚ ì€ ë¶ˆì•ˆ", 4, 1),
            ("ë§¤ì¼ì€ ë¶€ë‹´ìŠ¤ëŸ¬ì›Œì„œ ìŠ¬ì© ì¤„ì´ë ¤ í•¨", 1, 4),
            ("í•˜ê³  ì‹¶ê¸´ í•œë° ì§€ê²¨ì›Œí• ê¹Œ ë´ ëˆˆì¹˜ ë´„", 3, 3),
        ],
    },
    {
        "category": "ðŸ’— ì¹œë°€ê°",
        "question": "Q9. ì—°ì¸ì´ \"ìš°ë¦¬ ë¶€ëª¨ë‹˜í•œí…Œ ì¸ì‚¬ ê°ˆê¹Œ?\"ë¼ê³  í•œë‹¤.",
        "options": [
            ("íƒ€ì´ë° ì¢‹ìœ¼ë©´ ê°€ìž", 1, 1),
            ("ì¢‹ì€ë° ë¶€ëª¨ë‹˜ì´ ë‚˜ë¥¼ ì‹«ì–´í•˜ë©´ ì–´ì©Œì§€", 4, 1),
            ("ì•„ì§ ì´ë¥´ë‹¤ê³  ë¯¸ë£¸", 1, 4),
            ("ê°€ê³  ì‹¶ì€ë° ê´€ê³„ê°€ ë¬´ê±°ì›Œì§ˆê¹Œ ë‘ë ¤ì›€", 3, 3),
        ],
    },
    # â”€â”€ ì´ë³„/ê±°ë¦¬ë‘ê¸° (Q10~Q12) â”€â”€
    {
        "category": "ðŸ’” ì´ë³„/ê±°ë¦¬ë‘ê¸°",
        "question": "Q10. ì—°ì¸ì´ \"ìš°ë¦¬ ì¢€ ê±°ë¦¬ ë‘ìž\"ë¼ê³  í–ˆë‹¤.",
        "options": [
            ("ì´ìœ  ë¬»ê³  ì •ë¦¬í•  ì‹œê°„ì„ ê°€ì§", 1, 1),
            ("ë¨¸ë¦¿ì† í•˜ì–˜ì§€ê³  \"ë‚´ê°€ ë­˜ ìž˜ëª»í–ˆì–´?\"ë¶€í„° ë‚˜ì˜´", 4, 1),
            ("ê·¸ëž˜ ê·¸ê²Œ ë‚˜ì„ ìˆ˜ë„ ìžˆì§€", 1, 4),
            ("ë°›ì•„ë“¤ì—¬ì•¼ í•˜ëŠ”ë° ê°ì • ì¡°ì ˆì´ ì•ˆ ë¨", 4, 3),
        ],
    },
    {
        "category": "ðŸ’” ì´ë³„/ê±°ë¦¬ë‘ê¸°",
        "question": "Q11. ì´ë³„ í›„ ì „ ì—°ì¸ì´ ì—°ë½í•´ì™”ë‹¤.",
        "options": [
            ("ìƒí™© ë³´ê³  ëŒ€í™”í•˜ë˜ ì„ ì€ ì§€í‚´", 1, 1),
            ("ì•„ì§ ë§ˆìŒ ìžˆì–´ì„œ ë°”ë¡œ ë‹µìž¥", 4, 1),
            ("ì½ê³  ë¬´ì‹œí•˜ê±°ë‚˜ ê°„ë‹¨í•˜ê²Œë§Œ", 1, 4),
            ("ë°˜ê°‘ê³  í™”ë‚˜ê³  ë³µìž¡í•œ ê°ì •ì´ ë™ì‹œì—", 4, 4),
        ],
    },
    {
        "category": "ðŸ’” ì´ë³„/ê±°ë¦¬ë‘ê¸°",
        "question": "Q12. ì—°ì¸ì´ ìš”ì¦˜ ì˜ˆì „ë§Œí¼ ë‹¤ì •í•˜ì§€ ì•Šë‹¤.",
        "options": [
            ("\"ìš”ì¦˜ íž˜ë“  ì¼ ìžˆì–´?\" ì§ì ‘ ë¬¼ì–´ë´„", 1, 1),
            ("ì‹ì€ ê±´ ì•„ë‹Œì§€ í˜¼ìž ì‹œë‚˜ë¦¬ì˜¤ ëŒë¦¼", 4, 1),
            ("ë‚˜ë„ ë§žì¶°ì„œ í•œ ë°œ ë¹ ì§", 1, 4),
            ("ë¬¼ì–´ë³´ê³  ì‹¶ì€ë° ë‹µì´ ë¬´ì„œì›Œì„œ ëª¨ë¥¸ ì²™", 4, 3),
        ],
    },
    # â”€â”€ ì‹ ë¢°/ì˜ì¡´ (Q13~Q15) â”€â”€
    {
        "category": "ðŸ¤ ì‹ ë¢°/ì˜ì¡´",
        "question": "Q13. ì—°ì¸ì´ ì´ì„± ì¹œêµ¬ëž‘ ë‘˜ì´ ë°¥ ë¨¹ì—ˆë‹¤ê³  í•œë‹¤.",
        "options": [
            ("ë§í•´ì¤˜ì„œ ê³ ë§™ê³  í¬ê²Œ ì‹ ê²½ ì•ˆ ì”€", 1, 1),
            ("ë¯¿ìœ¼ë ¤ëŠ”ë° ìƒëŒ€ê°€ ëˆ„êµ°ì§€ ì•Œê³  ì‹¶ìŒ", 3, 1),
            ("ìƒê´€ì—†ë‹¤ í•˜ì§€ë§Œ ì†ìœ¼ë¡œëŠ” ë¶ˆíŽ¸", 2, 3),
            ("ê´œì°®ë‹¤ í–ˆë‹¤ê°€ ë‚˜ì¤‘ì— ê°‘ìžê¸° í™”ë‚¨", 4, 3),
        ],
    },
    {
        "category": "ðŸ¤ ì‹ ë¢°/ì˜ì¡´",
        "question": "Q14. ì—°ì¸ì´ ì¤‘ìš”í•œ ê²°ì •ì„ ë‚˜í•œí…Œ ìƒì˜ ì—†ì´ í˜¼ìž í–ˆë‹¤.",
        "options": [
            ("ì„œìš´í•˜ì§€ë§Œ ì´ìœ  ë“£ê³  ì´í•´í•˜ë ¤ í•¨", 1, 1),
            ("\"ë‚˜ëŠ” ì¤‘ìš”í•˜ì§€ ì•Šì€ ê±°ì•¼?\" ìƒê°ë¶€í„° ë“¬", 4, 1),
            ("ê°ìž ì¼ì€ ê°ìž ê²°ì •í•  ìˆ˜ ìžˆë‹¤ê³  ìƒê°", 1, 3),
            ("í™”ë‚˜ëŠ”ë° ë§í•˜ë©´ ì‹¸ìš¸ê¹Œ ë´ ì‚¼í‚´", 3, 3),
        ],
    },
    {
        "category": "ðŸ¤ ì‹ ë¢°/ì˜ì¡´",
        "question": "Q15. ì§€ê¸ˆ ì—°ì• ê°€ ëë‚˜ë©´ ë‚˜ëŠ”?",
        "options": [
            ("íž˜ë“¤ê² ì§€ë§Œ ì‹œê°„ì´ ì§€ë‚˜ë©´ ê´œì°®ì•„ì§ˆ ê±°ë¼ ìƒê°", 1, 1),
            ("ìƒìƒë§Œ í•´ë„ ë¬´ì„­ê³  ëª» ë²„í‹¸ ê²ƒ ê°™ìŒ", 4, 1),
            ("ìŠ¬í”„ê² ì§€ë§Œ í˜¼ìžê°€ íŽ¸í•  ìˆ˜ë„", 1, 4),
            ("ëë‚˜ë©´ ì•ˆ ë˜ëŠ”ë° ì†”ì§ížˆ ì§€ê¸ˆë„ ë¶ˆì•ˆ", 4, 3),
        ],
    },
]


def calculate_attachment_type(answers: list[int]) -> tuple[str, int, int]:
    """
    answers: ê° ë¬¸í•­ì˜ ì„ íƒ ì¸ë±ìŠ¤ (0~3), ì´ 15ê°œ
    returns: (ì• ì°©ìœ í˜• ì´ë¦„, ë¶ˆì•ˆ ì ìˆ˜ í•©, íšŒí”¼ ì ìˆ˜ í•©)
    """
    anxiety_total = 0
    avoidance_total = 0

    for i, choice_idx in enumerate(answers):
        _, anxiety, avoidance = QUESTIONS[i]["options"][choice_idx]
        anxiety_total += anxiety
        avoidance_total += avoidance

    # ì¤‘ì•™ê°’ 37ì  ê¸°ì¤€
    high_anxiety = anxiety_total >= 37
    high_avoidance = avoidance_total >= 37

    if not high_anxiety and not high_avoidance:
        attachment = "ì•ˆì •í˜• (Secure)"
    elif high_anxiety and not high_avoidance:
        attachment = "ë¶ˆì•ˆí˜• (Anxious)"
    elif not high_anxiety and high_avoidance:
        attachment = "íšŒí”¼í˜• (Avoidant)"
    else:
        attachment = "í˜¼ëž€í˜• (Fearful)"

    return attachment, anxiety_total, avoidance_total
